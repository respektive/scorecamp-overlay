import{n as U,x as ee,y as he,s as H,c as K,o as _e}from"../chunks/scheduler.C0snAWPl.js";import{S as M,i as N,e as w,s as A,t as D,c as y,a as E,d as k,f as I,b as L,o as p,p as O,g as V,h as d,j as T,u as F,v as B,w as W,n as P,q as Q,l as R,m as X,x as G,k as te,y as pe}from"../chunks/index.BQssWk23.js";import{d as Y,w as Z,i as me}from"../chunks/entry.CC5170iQ.js";const ce=typeof window<"u";let ge=ce?()=>window.performance.now():()=>Date.now(),ue=ce?t=>requestAnimationFrame(t):U;const z=new Set;function fe(t){z.forEach(e=>{e.c(t)||(z.delete(e),e.f())}),z.size!==0&&ue(fe)}function ve(t){let e;return z.size===0&&ue(fe),{promise:new Promise(n=>{z.add(e={c:t,f:n})}),abort(){z.delete(e)}}}function re(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}async function ke(){return(await(await fetch("https://respektive.pw/scorecamp/")).json()).map(s=>({username:s.username,user_id:s.user_id,score_at_start:s.starting_ranked_score,current_score:s.ranked_score,gained_score:s.gained_score})).sort((s,a)=>a.gained_score-s.gained_score).map((s,a)=>({...s,rank:a+1}))}async function be({depends:t}){return t("data:rankings"),{rankings:await ke()}}const Me=Object.freeze(Object.defineProperty({__proto__:null,load:be},Symbol.toStringTag,{value:"Module"}));function we(t){if(typeof window>"u"){const{subscribe:a}=Z(t);return{subscribe:a}}const e=Z(window.location.href),n=history.pushState,r=history.replaceState,s=()=>e.set(window.location.href);return history.pushState=function(){n.apply(this,arguments),s()},history.replaceState=function(){r.apply(this,arguments),s()},window.addEventListener("popstate",s),window.addEventListener("hashchange",s),{subscribe:Y(e,a=>new URL(a)).subscribe}}const ye=we();function ne(t){return Object.prototype.toString.call(t)==="[object Date]"}function Ee(t){return--t*t*t*t*t+1}function x(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((s,a)=>x(t[a],s));return s=>r.map(a=>a(s))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(ne(t)&&ne(e)){t=t.getTime(),e=e.getTime();const a=e-t;return i=>new Date(t+i*a)}const r=Object.keys(e),s={};return r.forEach(a=>{s[a]=x(t[a],e[a])}),a=>{const i={};return r.forEach(f=>{i[f]=s[f](a)}),i}}if(n==="number"){const r=e-t;return s=>t+s*r}throw new Error(`Cannot interpolate ${n} values`)}function Se(t,e={}){const n=Z(t);let r,s=t;function a(i,f){if(t==null)return n.set(t=i),Promise.resolve();s=i;let l=r,o=!1,{delay:u=0,duration:c=400,easing:m=he,interpolate:g=x}=ee(ee({},e),f);if(c===0)return l&&(l.abort(),l=null),n.set(t=s),Promise.resolve();const v=ge()+u;let S;return r=ve(q=>{if(q<v)return!0;o||(S=g(t,i),typeof c=="function"&&(c=c(t,i)),o=!0),l&&(l.abort(),l=null);const b=q-v;return b>c?(n.set(t=i),!1):(n.set(t=S(m(b/c))),!0)}),r.promise}return{set:a,update:(i,f)=>a(i(s,t),f),subscribe:n.subscribe}}const qe={duration:2500,easing:Ee};function je(t){let e,n,r,s,a,i=t[0].username+"",f,l,o,u,c,m,g,v,S,q=t[0].rank+"",b;return{c(){e=w("div"),n=w("div"),r=A(),s=w("div"),a=w("p"),f=D(i),l=A(),o=w("hr"),u=A(),c=w("p"),m=D(t[2]),g=A(),v=w("p"),S=D("#"),b=D(q),this.h()},l(h){e=y(h,"DIV",{class:!0,style:!0});var _=E(e);n=y(_,"DIV",{id:!0,style:!0,class:!0}),E(n).forEach(k),r=I(_),s=y(_,"DIV",{class:!0});var j=E(s);a=y(j,"P",{id:!0,class:!0});var $=E(a);f=L($,i),$.forEach(k),l=I(j),o=y(j,"HR",{class:!0}),u=I(j),c=y(j,"P",{id:!0,class:!0});var C=E(c);m=L(C,t[2]),C.forEach(k),j.forEach(k),g=I(_),v=y(_,"P",{id:!0,class:!0});var J=E(v);S=L(J,"#"),b=L(J,q),J.forEach(k),_.forEach(k),this.h()},h(){p(n,"id","avatar"),O(n,"background-image","url(https://a.ppy.sh/"+t[0].user_id+")"),p(n,"class","svelte-1ch1kqu"),p(a,"id","username"),p(a,"class","svelte-1ch1kqu"),p(o,"class","svelte-1ch1kqu"),p(c,"id","gained"),p(c,"class","svelte-1ch1kqu"),p(s,"class","stats svelte-1ch1kqu"),p(v,"id","rank"),p(v,"class","svelte-1ch1kqu"),p(e,"class","card svelte-1ch1kqu"),O(e,"--card-hue",t[1])},m(h,_){V(h,e,_),d(e,n),d(e,r),d(e,s),d(s,a),d(a,f),d(s,l),d(s,o),d(s,u),d(s,c),d(c,m),d(e,g),d(e,v),d(v,S),d(v,b)},p(h,[_]){_&1&&O(n,"background-image","url(https://a.ppy.sh/"+h[0].user_id+")"),_&1&&i!==(i=h[0].username+"")&&T(f,i),_&4&&T(m,h[2]),_&1&&q!==(q=h[0].rank+"")&&T(b,q),_&2&&O(e,"--card-hue",h[1])},i:U,o:U,d(h){h&&k(e)}}}function De(t,e,n){let r,s;const a=Se(0,qe),i=Y(a,o=>Math.round(o).toLocaleString("en-US"));K(t,i,o=>n(2,s=o));const f=Y(a,o=>o/1e6%360);K(t,f,o=>n(1,r=o));let{user:l}=e;return t.$$set=o=>{"user"in o&&n(0,l=o.user)},t.$$.update=()=>{t.$$.dirty&1&&a.set(l.gained_score)},[l,r,s,i,f]}class Le extends M{constructor(e){super(),N(this,e,De,je,H,{user:0})}}function Pe(t){let e,n,r,s=t[0].rank+"",a,i,f=t[0].username+"",l,o,u,c=t[0].gained_score.toLocaleString("en-US")+"",m,g,v,S=t[1].toLocaleString("en-US")+"",q,b;return{c(){e=w("div"),n=w("p"),r=D("#"),a=D(s),i=D(" - "),l=D(f),o=A(),u=w("p"),m=D(c),g=A(),v=w("span"),q=D(S),this.h()},l(h){e=y(h,"DIV",{class:!0});var _=E(e);n=y(_,"P",{id:!0,class:!0});var j=E(n);r=L(j,"#"),a=L(j,s),i=L(j," - "),l=L(j,f),j.forEach(k),o=I(_),u=y(_,"P",{id:!0,class:!0});var $=E(u);m=L($,c),g=I($),v=y($,"SPAN",{id:!0,class:!0});var C=E(v);q=L(C,S),C.forEach(k),$.forEach(k),_.forEach(k),this.h()},h(){p(n,"id","username"),p(n,"class","svelte-8qxyyi"),p(v,"id",b=t[1]>0?"positive":"negative"),p(v,"class","svelte-8qxyyi"),p(u,"id","score"),p(u,"class","svelte-8qxyyi"),p(e,"class","delta svelte-8qxyyi")},m(h,_){V(h,e,_),d(e,n),d(n,r),d(n,a),d(n,i),d(n,l),d(e,o),d(e,u),d(u,m),d(u,g),d(u,v),d(v,q)},p(h,[_]){_&1&&s!==(s=h[0].rank+"")&&T(a,s),_&1&&f!==(f=h[0].username+"")&&T(l,f),_&1&&c!==(c=h[0].gained_score.toLocaleString("en-US")+"")&&T(m,c),_&2&&S!==(S=h[1].toLocaleString("en-US")+"")&&T(q,S),_&2&&b!==(b=h[1]>0?"positive":"negative")&&p(v,"id",b)},i:U,o:U,d(h){h&&k(e)}}}function Ae(t,e,n){let{main_user:r}=e,{compare_user:s}=e,a=0;return t.$$set=i=>{"main_user"in i&&n(2,r=i.main_user),"compare_user"in i&&n(0,s=i.compare_user)},t.$$.update=()=>{t.$$.dirty&5&&n(1,a=s.gained_score-r.gained_score)},[s,a,r]}class de extends M{constructor(e){super(),N(this,e,Ae,Pe,H,{main_user:2,compare_user:0})}}function se(t){let e,n;return e=new de({props:{main_user:t[0],compare_user:t[1][t[0].rank-2]}}),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,s){W(e,r,s),n=!0},p(r,s){const a={};s&1&&(a.main_user=r[0]),s&3&&(a.compare_user=r[1][r[0].rank-2]),e.$set(a)},i(r){n||(P(e.$$.fragment,r),n=!0)},o(r){R(e.$$.fragment,r),n=!1},d(r){G(e,r)}}}function ae(t){let e;return{c(){e=w("div"),this.h()},l(n){e=y(n,"DIV",{id:!0,class:!0}),E(e).forEach(k),this.h()},h(){p(e,"id","spacer"),p(e,"class","svelte-1sj613z")},m(n,r){V(n,e,r)},d(n){n&&k(e)}}}function ie(t){let e,n;return e=new de({props:{main_user:t[0],compare_user:t[1][t[0].rank]}}),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,s){W(e,r,s),n=!0},p(r,s){const a={};s&1&&(a.main_user=r[0]),s&3&&(a.compare_user=r[1][r[0].rank]),e.$set(a)},i(r){n||(P(e.$$.fragment,r),n=!0)},o(r){R(e.$$.fragment,r),n=!1},d(r){G(e,r)}}}function Ie(t){let e,n,r,s,a,i,f;n=new Le({props:{user:t[0]}});let l=t[0].rank>1&&se(t),o=t[0].rank>1&&t[1][t[0].rank]&&ae(),u=t[1][t[0].rank]&&ie(t);return{c(){e=w("div"),F(n.$$.fragment),r=A(),s=w("div"),l&&l.c(),a=A(),o&&o.c(),i=A(),u&&u.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var m=E(e);B(n.$$.fragment,m),r=I(m),s=y(m,"DIV",{class:!0});var g=E(s);l&&l.l(g),a=I(g),o&&o.l(g),i=I(g),u&&u.l(g),g.forEach(k),m.forEach(k),this.h()},h(){p(s,"class","deltas svelte-1sj613z"),p(e,"class","container svelte-1sj613z")},m(c,m){V(c,e,m),W(n,e,null),d(e,r),d(e,s),l&&l.m(s,null),d(s,a),o&&o.m(s,null),d(s,i),u&&u.m(s,null),f=!0},p(c,[m]){const g={};m&1&&(g.user=c[0]),n.$set(g),c[0].rank>1?l?(l.p(c,m),m&1&&P(l,1)):(l=se(c),l.c(),P(l,1),l.m(s,a)):l&&(Q(),R(l,1,1,()=>{l=null}),X()),c[0].rank>1&&c[1][c[0].rank]?o||(o=ae(),o.c(),o.m(s,i)):o&&(o.d(1),o=null),c[1][c[0].rank]?u?(u.p(c,m),m&3&&P(u,1)):(u=ie(c),u.c(),P(u,1),u.m(s,null)):u&&(Q(),R(u,1,1,()=>{u=null}),X())},i(c){f||(P(n.$$.fragment,c),P(l),P(u),f=!0)},o(c){R(n.$$.fragment,c),R(l),R(u),f=!1},d(c){c&&k(e),G(n),l&&l.d(),o&&o.d(),u&&u.d()}}}function $e(t,e,n){let{user:r}=e,{rankings:s}=e;return t.$$set=a=>{"user"in a&&n(0,r=a.user),"rankings"in a&&n(1,s=a.rankings)},[r,s]}class Re extends M{constructor(e){super(),N(this,e,$e,Ie,H,{user:0,rankings:1})}}function le(t,e,n){const r=t.slice();return r[1]=e[n],r[7]=n,r}function Te(t){let e,n=re(t[0]),r=[];for(let s=0;s<n.length;s+=1)r[s]=oe(le(t,n,s));return{c(){e=w("table");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=y(s,"TABLE",{class:!0});var a=E(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(k),this.h()},h(){p(e,"class","svelte-glvni4")},m(s,a){V(s,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(s,a){if(a&1){n=re(s[0]);let i;for(i=0;i<n.length;i+=1){const f=le(s,n,i);r[i]?r[i].p(f,a):(r[i]=oe(f),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},i:U,o:U,d(s){s&&k(e),pe(r,s)}}}function Ce(t){let e,n;return e=new Re({props:{user:t[1],rankings:t[0]}}),{c(){F(e.$$.fragment)},l(r){B(e.$$.fragment,r)},m(r,s){W(e,r,s),n=!0},p(r,s){const a={};s&2&&(a.user=r[1]),s&1&&(a.rankings=r[0]),e.$set(a)},i(r){n||(P(e.$$.fragment,r),n=!0)},o(r){R(e.$$.fragment,r),n=!1},d(r){G(e,r)}}}function oe(t){let e,n,r,s=t[7]+1+"",a,i,f,l,o=t[1].username+"",u,c,m,g,v=t[1].gained_score.toLocaleString()+"",S,q;return{c(){e=w("tr"),n=w("td"),r=D("#"),a=D(s),i=A(),f=w("td"),l=w("a"),u=D(o),m=A(),g=w("td"),S=D(v),q=A(),this.h()},l(b){e=y(b,"TR",{class:!0});var h=E(e);n=y(h,"TD",{class:!0});var _=E(n);r=L(_,"#"),a=L(_,s),_.forEach(k),i=I(h),f=y(h,"TD",{class:!0});var j=E(f);l=y(j,"A",{href:!0,class:!0});var $=E(l);u=L($,o),$.forEach(k),j.forEach(k),m=I(h),g=y(h,"TD",{class:!0});var C=E(g);S=L(C,v),C.forEach(k),q=I(h),h.forEach(k),this.h()},h(){p(n,"class","rank svelte-glvni4"),p(l,"href",c="#"+t[1].username),p(l,"class","svelte-glvni4"),p(f,"class","user svelte-glvni4"),p(g,"class","score svelte-glvni4"),p(e,"class","svelte-glvni4")},m(b,h){V(b,e,h),d(e,n),d(n,r),d(n,a),d(e,i),d(e,f),d(f,l),d(l,u),d(e,m),d(e,g),d(g,S),d(e,q)},p(b,h){h&1&&o!==(o=b[1].username+"")&&T(u,o),h&1&&c!==(c="#"+b[1].username)&&p(l,"href",c),h&1&&v!==(v=b[1].gained_score.toLocaleString()+"")&&T(S,v)},d(b){b&&k(e)}}}function Ue(t){let e,n,r,s;const a=[Ce,Te],i=[];function f(l,o){return l[1]?0:1}return e=f(t),n=i[e]=a[e](t),{c(){n.c(),r=te()},l(l){n.l(l),r=te()},m(l,o){i[e].m(l,o),V(l,r,o),s=!0},p(l,[o]){let u=e;e=f(l),e===u?i[e].p(l,o):(Q(),R(i[u],1,1,()=>{i[u]=null}),X(),n=i[e],n?n.p(l,o):(n=i[e]=a[e](l),n.c()),P(n,1),n.m(r.parentNode,r))},i(l){s||(P(n),s=!0)},o(l){R(n),s=!1},d(l){l&&k(r),i[e].d(l)}}}function Ve(t,e,n){let r,s,a,i;K(t,ye,o=>n(4,i=o));let{data:f}=e;const l=60*1e3;return _e(()=>{const o=setInterval(()=>{me("data:rankings")},l);return()=>{clearInterval(o)}}),t.$$set=o=>{"data"in o&&n(2,f=o.data)},t.$$.update=()=>{t.$$.dirty&16&&n(3,r=decodeURIComponent(i.hash.substring(1).toLowerCase())),t.$$.dirty&12&&n(1,s=r?f.rankings.find(o=>o.username.toLowerCase()===r):null),t.$$.dirty&4&&n(0,a=f.rankings)},[a,s,f,r,i]}class Ne extends M{constructor(e){super(),N(this,e,Ve,Ue,H,{data:2})}}export{Ne as component,Me as universal};
