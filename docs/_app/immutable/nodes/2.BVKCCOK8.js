import{n as U,x as ee,y as pe,s as O,c as K,o as he}from"../chunks/scheduler.C0snAWPl.js";import{S as H,i as q,e as E,s as C,t as F,c as b,a as S,d as k,f as j,b as L,o as h,p as z,g as V,h as d,j as R,u as M,v as N,w as W,n as P,q as Q,l as $,m as X,x as G,k as te,y as ge}from"../chunks/index.BQssWk23.js";import{d as Y,w as Z,i as me}from"../chunks/entry.DUA9C5jY.js";const ce=typeof window<"u";let ve=ce?()=>window.performance.now():()=>Date.now(),fe=ce?t=>requestAnimationFrame(t):U;const B=new Set;function de(t){B.forEach(e=>{e.c(t)||(B.delete(e),e.f())}),B.size!==0&&fe(de)}function ke(t){let e;return B.size===0&&fe(de),{promise:new Promise(r=>{B.add(e={c:t,f:r})}),abort(){B.delete(e)}}}function re(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}async function we(){return(await(await fetch("https://respektive.pw/scorecamp/")).json()).map(s=>({username:s.username,user_id:s.user_id,score_at_start:s.starting_ranked_score,current_score:s.ranked_score,gained_score:s.gained_score})).sort((s,a)=>a.gained_score-s.gained_score).map((s,a)=>({...s,rank:a+1}))}async function Ee({depends:t}){return t("data:rankings"),{rankings:await we()}}const qe=Object.freeze(Object.defineProperty({__proto__:null,load:Ee},Symbol.toStringTag,{value:"Module"}));function be(t){if(typeof window>"u"){const{subscribe:a}=Z(t);return{subscribe:a}}const e=Z(window.location.href),r=history.pushState,n=history.replaceState,s=()=>e.set(window.location.href);return history.pushState=function(){r.apply(this,arguments),s()},history.replaceState=function(){n.apply(this,arguments),s()},window.addEventListener("popstate",s),window.addEventListener("hashchange",s),{subscribe:Y(e,a=>new URL(a)).subscribe}}const Se=be();function ne(t){return Object.prototype.toString.call(t)==="[object Date]"}function ye(t){return--t*t*t*t*t+1}function x(t,e){if(t===e||t!==t)return()=>t;const r=typeof t;if(r!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((s,a)=>x(t[a],s));return s=>n.map(a=>a(s))}if(r==="object"){if(!t||!e)throw new Error("Object cannot be null");if(ne(t)&&ne(e)){t=t.getTime(),e=e.getTime();const a=e-t;return i=>new Date(t+i*a)}const n=Object.keys(e),s={};return n.forEach(a=>{s[a]=x(t[a],e[a])}),a=>{const i={};return n.forEach(f=>{i[f]=s[f](a)}),i}}if(r==="number"){const n=e-t;return s=>t+s*n}throw new Error(`Cannot interpolate ${r} values`)}function De(t,e={}){const r=Z(t);let n,s=t;function a(i,f){if(t==null)return r.set(t=i),Promise.resolve();s=i;let l=n,o=!1,{delay:c=0,duration:u=400,easing:g=pe,interpolate:v=x}=ee(ee({},e),f);if(u===0)return l&&(l.abort(),l=null),r.set(t=s),Promise.resolve();const m=ve()+c;let y;return n=ke(D=>{if(D<m)return!0;o||(y=v(t,i),typeof u=="function"&&(u=u(t,i)),o=!0),l&&(l.abort(),l=null);const w=D-m;return w>u?(r.set(t=i),!1):(r.set(t=y(g(w/u))),!0)}),n.promise}return{set:a,update:(i,f)=>a(i(s,t),f),subscribe:r.subscribe}}const Ae={duration:2500,easing:ye};function se(t){return t===1?"linear-gradient(180deg, #FFE600 0%, #ED82FF 100%)":t<=10?"linear-gradient(180deg, #97DCFF 0%, #ED82FF 100%)":t<=25?"linear-gradient(180deg, #A8F0EF 0%, #52E0DF 100%)":t<=50?"linear-gradient(180deg, #FFEE99 0%, #FFDD33 100%)":t<=75?"linear-gradient(180deg, #E0E0EB 0%, #A3A3C2 100%)":t<=100?"linear-gradient(180deg, #B88F7A 0%, #855C47 100%)":"#BAB2AB"}function Fe(t){let e,r,n,s,a,i=t[0].username+"",f,l,o,c,u,g,v,m,y,D=t[0].rank+"",w;return{c(){e=E("div"),r=E("div"),n=C(),s=E("div"),a=E("p"),f=F(i),l=C(),o=E("hr"),c=C(),u=E("p"),g=F(t[2]),v=C(),m=E("p"),y=F("#"),w=F(D),this.h()},l(_){e=b(_,"DIV",{class:!0,style:!0});var p=S(e);r=b(p,"DIV",{id:!0,style:!0,class:!0}),S(r).forEach(k),n=j(p),s=b(p,"DIV",{class:!0});var A=S(s);a=b(A,"P",{id:!0,class:!0});var I=S(a);f=L(I,i),I.forEach(k),l=j(A),o=b(A,"HR",{class:!0}),c=j(A),u=b(A,"P",{id:!0,class:!0});var T=S(u);g=L(T,t[2]),T.forEach(k),A.forEach(k),v=j(p),m=b(p,"P",{id:!0,style:!0,class:!0});var J=S(m);y=L(J,"#"),w=L(J,D),J.forEach(k),p.forEach(k),this.h()},h(){h(r,"id","avatar"),z(r,"background-image","url(https://a.ppy.sh/"+t[0].user_id+")"),h(r,"class","svelte-1ds396x"),h(a,"id","username"),h(a,"class","svelte-1ds396x"),h(o,"class","svelte-1ds396x"),h(u,"id","gained"),h(u,"class","svelte-1ds396x"),h(s,"class","stats svelte-1ds396x"),h(m,"id","rank"),z(m,"--rank-colour",se(t[0].rank)),h(m,"class","svelte-1ds396x"),h(e,"class","card svelte-1ds396x"),z(e,"--card-hue",t[1])},m(_,p){V(_,e,p),d(e,r),d(e,n),d(e,s),d(s,a),d(a,f),d(s,l),d(s,o),d(s,c),d(s,u),d(u,g),d(e,v),d(e,m),d(m,y),d(m,w)},p(_,[p]){p&1&&z(r,"background-image","url(https://a.ppy.sh/"+_[0].user_id+")"),p&1&&i!==(i=_[0].username+"")&&R(f,i),p&4&&R(g,_[2]),p&1&&D!==(D=_[0].rank+"")&&R(w,D),p&1&&z(m,"--rank-colour",se(_[0].rank)),p&2&&z(e,"--card-hue",_[1])},i:U,o:U,d(_){_&&k(e)}}}function Le(t,e,r){let n,s;const a=De(0,Ae),i=Y(a,o=>Math.round(o).toLocaleString("en-US"));K(t,i,o=>r(2,s=o));const f=Y(a,o=>o/1e6%360);K(t,f,o=>r(1,n=o));let{user:l}=e;return t.$$set=o=>{"user"in o&&r(0,l=o.user)},t.$$.update=()=>{t.$$.dirty&1&&a.set(l.gained_score)},[l,n,s,i,f]}class Pe extends H{constructor(e){super(),q(this,e,Le,Fe,O,{user:0})}}function Ce(t){let e,r,n,s=t[0].rank+"",a,i,f=t[0].username+"",l,o,c,u=t[0].gained_score.toLocaleString("en-US")+"",g,v,m,y=t[1].toLocaleString("en-US")+"",D,w;return{c(){e=E("div"),r=E("p"),n=F("#"),a=F(s),i=F(" - "),l=F(f),o=C(),c=E("p"),g=F(u),v=C(),m=E("span"),D=F(y),this.h()},l(_){e=b(_,"DIV",{class:!0});var p=S(e);r=b(p,"P",{id:!0,class:!0});var A=S(r);n=L(A,"#"),a=L(A,s),i=L(A," - "),l=L(A,f),A.forEach(k),o=j(p),c=b(p,"P",{id:!0,class:!0});var I=S(c);g=L(I,u),v=j(I),m=b(I,"SPAN",{id:!0,class:!0});var T=S(m);D=L(T,y),T.forEach(k),I.forEach(k),p.forEach(k),this.h()},h(){h(r,"id","username"),h(r,"class","svelte-wa6hk6"),h(m,"id",w=t[1]>0?"positive":"negative"),h(m,"class","svelte-wa6hk6"),h(c,"id","score"),h(c,"class","svelte-wa6hk6"),h(e,"class","delta svelte-wa6hk6")},m(_,p){V(_,e,p),d(e,r),d(r,n),d(r,a),d(r,i),d(r,l),d(e,o),d(e,c),d(c,g),d(c,v),d(c,m),d(m,D)},p(_,[p]){p&1&&s!==(s=_[0].rank+"")&&R(a,s),p&1&&f!==(f=_[0].username+"")&&R(l,f),p&1&&u!==(u=_[0].gained_score.toLocaleString("en-US")+"")&&R(g,u),p&2&&y!==(y=_[1].toLocaleString("en-US")+"")&&R(D,y),p&2&&w!==(w=_[1]>0?"positive":"negative")&&h(m,"id",w)},i:U,o:U,d(_){_&&k(e)}}}function je(t,e,r){let{main_user:n}=e,{compare_user:s}=e,a=0;return t.$$set=i=>{"main_user"in i&&r(2,n=i.main_user),"compare_user"in i&&r(0,s=i.compare_user)},t.$$.update=()=>{t.$$.dirty&5&&r(1,a=s.gained_score-n.gained_score)},[s,a,n]}class _e extends H{constructor(e){super(),q(this,e,je,Ce,O,{main_user:2,compare_user:0})}}function ae(t){let e,r;return e=new _e({props:{main_user:t[0],compare_user:t[1][t[0].rank-2]}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){W(e,n,s),r=!0},p(n,s){const a={};s&1&&(a.main_user=n[0]),s&3&&(a.compare_user=n[1][n[0].rank-2]),e.$set(a)},i(n){r||(P(e.$$.fragment,n),r=!0)},o(n){$(e.$$.fragment,n),r=!1},d(n){G(e,n)}}}function ie(t){let e;return{c(){e=E("div"),this.h()},l(r){e=b(r,"DIV",{id:!0,class:!0}),S(e).forEach(k),this.h()},h(){h(e,"id","spacer"),h(e,"class","svelte-1irzswg")},m(r,n){V(r,e,n)},d(r){r&&k(e)}}}function le(t){let e,r;return e=new _e({props:{main_user:t[0],compare_user:t[1][t[0].rank]}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){W(e,n,s),r=!0},p(n,s){const a={};s&1&&(a.main_user=n[0]),s&3&&(a.compare_user=n[1][n[0].rank]),e.$set(a)},i(n){r||(P(e.$$.fragment,n),r=!0)},o(n){$(e.$$.fragment,n),r=!1},d(n){G(e,n)}}}function Ie(t){let e,r,n,s,a,i,f,l=t[0].rank>1&&ae(t),o=t[0].rank>1&&t[1][t[0].rank]&&ie(),c=t[1][t[0].rank]&&le(t);return i=new Pe({props:{user:t[0]}}),{c(){e=E("div"),r=E("div"),l&&l.c(),n=C(),o&&o.c(),s=C(),c&&c.c(),a=C(),M(i.$$.fragment),this.h()},l(u){e=b(u,"DIV",{class:!0});var g=S(e);r=b(g,"DIV",{class:!0});var v=S(r);l&&l.l(v),n=j(v),o&&o.l(v),s=j(v),c&&c.l(v),v.forEach(k),a=j(g),N(i.$$.fragment,g),g.forEach(k),this.h()},h(){h(r,"class","deltas svelte-1irzswg"),h(e,"class","container svelte-1irzswg")},m(u,g){V(u,e,g),d(e,r),l&&l.m(r,null),d(r,n),o&&o.m(r,null),d(r,s),c&&c.m(r,null),d(e,a),W(i,e,null),f=!0},p(u,[g]){u[0].rank>1?l?(l.p(u,g),g&1&&P(l,1)):(l=ae(u),l.c(),P(l,1),l.m(r,n)):l&&(Q(),$(l,1,1,()=>{l=null}),X()),u[0].rank>1&&u[1][u[0].rank]?o||(o=ie(),o.c(),o.m(r,s)):o&&(o.d(1),o=null),u[1][u[0].rank]?c?(c.p(u,g),g&3&&P(c,1)):(c=le(u),c.c(),P(c,1),c.m(r,null)):c&&(Q(),$(c,1,1,()=>{c=null}),X());const v={};g&1&&(v.user=u[0]),i.$set(v)},i(u){f||(P(l),P(c),P(i.$$.fragment,u),f=!0)},o(u){$(l),$(c),$(i.$$.fragment,u),f=!1},d(u){u&&k(e),l&&l.d(),o&&o.d(),c&&c.d(),G(i)}}}function $e(t,e,r){let{user:n}=e,{rankings:s}=e;return t.$$set=a=>{"user"in a&&r(0,n=a.user),"rankings"in a&&r(1,s=a.rankings)},[n,s]}class Re extends H{constructor(e){super(),q(this,e,$e,Ie,O,{user:0,rankings:1})}}function oe(t,e,r){const n=t.slice();return n[1]=e[r],n[7]=r,n}function Te(t){let e,r=re(t[0]),n=[];for(let s=0;s<r.length;s+=1)n[s]=ue(oe(t,r,s));return{c(){e=E("table");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=b(s,"TABLE",{class:!0});var a=S(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(k),this.h()},h(){h(e,"class","svelte-glvni4")},m(s,a){V(s,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,a){if(a&1){r=re(s[0]);let i;for(i=0;i<r.length;i+=1){const f=oe(s,r,i);n[i]?n[i].p(f,a):(n[i]=ue(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=r.length}},i:U,o:U,d(s){s&&k(e),ge(n,s)}}}function Ue(t){let e,r;return e=new Re({props:{user:t[1],rankings:t[0]}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){W(e,n,s),r=!0},p(n,s){const a={};s&2&&(a.user=n[1]),s&1&&(a.rankings=n[0]),e.$set(a)},i(n){r||(P(e.$$.fragment,n),r=!0)},o(n){$(e.$$.fragment,n),r=!1},d(n){G(e,n)}}}function ue(t){let e,r,n,s=t[7]+1+"",a,i,f,l,o=t[1].username+"",c,u,g,v,m=t[1].gained_score.toLocaleString()+"",y,D;return{c(){e=E("tr"),r=E("td"),n=F("#"),a=F(s),i=C(),f=E("td"),l=E("a"),c=F(o),g=C(),v=E("td"),y=F(m),D=C(),this.h()},l(w){e=b(w,"TR",{class:!0});var _=S(e);r=b(_,"TD",{class:!0});var p=S(r);n=L(p,"#"),a=L(p,s),p.forEach(k),i=j(_),f=b(_,"TD",{class:!0});var A=S(f);l=b(A,"A",{href:!0,class:!0});var I=S(l);c=L(I,o),I.forEach(k),A.forEach(k),g=j(_),v=b(_,"TD",{class:!0});var T=S(v);y=L(T,m),T.forEach(k),D=j(_),_.forEach(k),this.h()},h(){h(r,"class","rank svelte-glvni4"),h(l,"href",u="#"+t[1].username),h(l,"class","svelte-glvni4"),h(f,"class","user svelte-glvni4"),h(v,"class","score svelte-glvni4"),h(e,"class","svelte-glvni4")},m(w,_){V(w,e,_),d(e,r),d(r,n),d(r,a),d(e,i),d(e,f),d(f,l),d(l,c),d(e,g),d(e,v),d(v,y),d(e,D)},p(w,_){_&1&&o!==(o=w[1].username+"")&&R(c,o),_&1&&u!==(u="#"+w[1].username)&&h(l,"href",u),_&1&&m!==(m=w[1].gained_score.toLocaleString()+"")&&R(y,m)},d(w){w&&k(e)}}}function Ve(t){let e,r,n,s;const a=[Ue,Te],i=[];function f(l,o){return l[1]?0:1}return e=f(t),r=i[e]=a[e](t),{c(){r.c(),n=te()},l(l){r.l(l),n=te()},m(l,o){i[e].m(l,o),V(l,n,o),s=!0},p(l,[o]){let c=e;e=f(l),e===c?i[e].p(l,o):(Q(),$(i[c],1,1,()=>{i[c]=null}),X(),r=i[e],r?r.p(l,o):(r=i[e]=a[e](l),r.c()),P(r,1),r.m(n.parentNode,n))},i(l){s||(P(r),s=!0)},o(l){$(r),s=!1},d(l){l&&k(n),i[e].d(l)}}}function ze(t,e,r){let n,s,a,i;K(t,Se,o=>r(4,i=o));let{data:f}=e;const l=60*1e3;return he(()=>{const o=setInterval(()=>{me("data:rankings")},l);return()=>{clearInterval(o)}}),t.$$set=o=>{"data"in o&&r(2,f=o.data)},t.$$.update=()=>{t.$$.dirty&16&&r(3,n=decodeURIComponent(i.hash.substring(1).toLowerCase())),t.$$.dirty&12&&r(1,s=n?f.rankings.find(o=>o.username.toLowerCase()===n):null),t.$$.dirty&4&&r(0,a=f.rankings)},[a,s,f,n,i]}class Me extends H{constructor(e){super(),q(this,e,ze,Ve,O,{data:2})}}export{Me as component,qe as universal};
