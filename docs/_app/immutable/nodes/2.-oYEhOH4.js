import{a as A,n as T,c as ae,o as le}from"../chunks/scheduler.CbAa4uEG.js";import{S as H,i as M,e as y,s as P,t as q,c as S,a as w,d as p,f as j,b as L,o as _,p as Q,g as R,h as u,j as C,u as N,v as O,w as B,n as I,q as G,l as V,m as J,x as W,k as X,y as ie}from"../chunks/index.8LiQRpMr.js";import{d as oe,w as Y}from"../chunks/index.Cxq2KWkB.js";function Z(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}async function ce(){return(await(await fetch("https://respektive.pw/scorecamp/")).json()).map(s=>({username:s.username,user_id:s.user_id,score_at_start:s.starting_ranked_score,current_score:s.ranked_score,gained_score:s.gained_score})).sort((s,l)=>l.gained_score-s.gained_score).map((s,l)=>({...s,rank:l+1}))}async function ue({depends:n}){return n("data:rankings"),{rankings:await ce()}}const De=Object.freeze(Object.defineProperty({__proto__:null,load:ue},Symbol.toStringTag,{value:"Module"}));function fe(n){if(typeof window>"u"){const{subscribe:l}=Y(n);return{subscribe:l}}const e=Y(window.location.href),r=history.pushState,t=history.replaceState,s=()=>e.set(window.location.href);return history.pushState=function(){r.apply(this,arguments),s()},history.replaceState=function(){t.apply(this,arguments),s()},window.addEventListener("popstate",s),window.addEventListener("hashchange",s),{subscribe:oe(e,l=>new URL(l)).subscribe}}const de=fe();function _e(n){let e,r,t,s,l,i=n[0].username+"",d,a,f,o,c,m=n[0].gained_score.toLocaleString("en-US")+"",g,E,$,U,v=n[0].rank+"",h;return{c(){e=y("div"),r=y("div"),t=P(),s=y("div"),l=y("p"),d=q(i),a=P(),f=y("hr"),o=P(),c=y("p"),g=q(m),E=P(),$=y("p"),U=q("#"),h=q(v),this.h()},l(b){e=S(b,"DIV",{class:!0});var k=w(e);r=S(k,"DIV",{id:!0,style:!0,class:!0}),w(r).forEach(p),t=j(k),s=S(k,"DIV",{class:!0});var D=w(s);l=S(D,"P",{id:!0,class:!0});var z=w(l);d=L(z,i),z.forEach(p),a=j(D),f=S(D,"HR",{class:!0}),o=j(D),c=S(D,"P",{id:!0,class:!0});var K=w(c);g=L(K,m),K.forEach(p),D.forEach(p),E=j(k),$=S(k,"P",{id:!0,class:!0});var F=w($);U=L(F,"#"),h=L(F,v),F.forEach(p),k.forEach(p),this.h()},h(){_(r,"id","avatar"),Q(r,"background-image","url(https://a.ppy.sh/"+n[0].user_id+")"),_(r,"class","svelte-dq8yu2"),_(l,"id","username"),_(l,"class","svelte-dq8yu2"),_(f,"class","svelte-dq8yu2"),_(c,"id","gained"),_(c,"class","svelte-dq8yu2"),_(s,"class","stats svelte-dq8yu2"),_($,"id","rank"),_($,"class","svelte-dq8yu2"),_(e,"class","card svelte-dq8yu2")},m(b,k){R(b,e,k),u(e,r),u(e,t),u(e,s),u(s,l),u(l,d),u(s,a),u(s,f),u(s,o),u(s,c),u(c,g),u(e,E),u(e,$),u($,U),u($,h)},p(b,[k]){k&1&&Q(r,"background-image","url(https://a.ppy.sh/"+b[0].user_id+")"),k&1&&i!==(i=b[0].username+"")&&C(d,i),k&1&&m!==(m=b[0].gained_score.toLocaleString("en-US")+"")&&C(g,m),k&1&&v!==(v=b[0].rank+"")&&C(h,v)},i:T,o:T,d(b){b&&p(e)}}}function he(n,e,r){let{user:t}=e;return n.$$set=s=>{"user"in s&&r(0,t=s.user)},[t]}class me extends H{constructor(e){super(),M(this,e,he,_e,A,{user:0})}}function pe(n){let e,r,t,s=n[0].rank+"",l,i,d=n[0].username+"",a,f,o,c=n[0].gained_score.toLocaleString("en-US")+"",m,g,E,$=n[1].toLocaleString("en-US")+"",U;return{c(){e=y("div"),r=y("p"),t=q("#"),l=q(s),i=q(" - "),a=q(d),f=P(),o=y("p"),m=q(c),g=P(),E=y("span"),U=q($),this.h()},l(v){e=S(v,"DIV",{class:!0});var h=w(e);r=S(h,"P",{id:!0,class:!0});var b=w(r);t=L(b,"#"),l=L(b,s),i=L(b," - "),a=L(b,d),b.forEach(p),f=j(h),o=S(h,"P",{id:!0,class:!0});var k=w(o);m=L(k,c),g=j(k),E=S(k,"SPAN",{id:!0,class:!0});var D=w(E);U=L(D,$),D.forEach(p),k.forEach(p),h.forEach(p),this.h()},h(){_(r,"id","username"),_(r,"class","svelte-8qxyyi"),_(E,"id",n[1]>0?"positive":"negative"),_(E,"class","svelte-8qxyyi"),_(o,"id","score"),_(o,"class","svelte-8qxyyi"),_(e,"class","delta svelte-8qxyyi")},m(v,h){R(v,e,h),u(e,r),u(r,t),u(r,l),u(r,i),u(r,a),u(e,f),u(e,o),u(o,m),u(o,g),u(o,E),u(E,U)},p(v,[h]){h&1&&s!==(s=v[0].rank+"")&&C(l,s),h&1&&d!==(d=v[0].username+"")&&C(a,d),h&1&&c!==(c=v[0].gained_score.toLocaleString("en-US")+"")&&C(m,c)},i:T,o:T,d(v){v&&p(e)}}}function ge(n,e,r){let{main_user:t}=e,{compare_user:s}=e,l=s.gained_score-t.gained_score;return n.$$set=i=>{"main_user"in i&&r(2,t=i.main_user),"compare_user"in i&&r(0,s=i.compare_user)},[s,l,t]}class ne extends H{constructor(e){super(),M(this,e,ge,pe,A,{main_user:2,compare_user:0})}}function x(n){let e,r;return e=new ne({props:{main_user:n[0],compare_user:n[1][n[0].rank-2]}}),{c(){N(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){B(e,t,s),r=!0},p(t,s){const l={};s&1&&(l.main_user=t[0]),s&3&&(l.compare_user=t[1][t[0].rank-2]),e.$set(l)},i(t){r||(I(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){W(e,t)}}}function ee(n){let e;return{c(){e=y("div"),this.h()},l(r){e=S(r,"DIV",{id:!0,class:!0}),w(e).forEach(p),this.h()},h(){_(e,"id","spacer"),_(e,"class","svelte-1sj613z")},m(r,t){R(r,e,t)},d(r){r&&p(e)}}}function te(n){let e,r;return e=new ne({props:{main_user:n[0],compare_user:n[1][n[0].rank]}}),{c(){N(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){B(e,t,s),r=!0},p(t,s){const l={};s&1&&(l.main_user=t[0]),s&3&&(l.compare_user=t[1][t[0].rank]),e.$set(l)},i(t){r||(I(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){W(e,t)}}}function ve(n){let e,r,t,s,l,i,d;r=new me({props:{user:n[0]}});let a=n[0].rank>1&&x(n),f=n[0].rank>1&&n[1][n[0].rank]&&ee(),o=n[1][n[0].rank]&&te(n);return{c(){e=y("div"),N(r.$$.fragment),t=P(),s=y("div"),a&&a.c(),l=P(),f&&f.c(),i=P(),o&&o.c(),this.h()},l(c){e=S(c,"DIV",{class:!0});var m=w(e);O(r.$$.fragment,m),t=j(m),s=S(m,"DIV",{class:!0});var g=w(s);a&&a.l(g),l=j(g),f&&f.l(g),i=j(g),o&&o.l(g),g.forEach(p),m.forEach(p),this.h()},h(){_(s,"class","deltas svelte-1sj613z"),_(e,"class","container svelte-1sj613z")},m(c,m){R(c,e,m),B(r,e,null),u(e,t),u(e,s),a&&a.m(s,null),u(s,l),f&&f.m(s,null),u(s,i),o&&o.m(s,null),d=!0},p(c,[m]){const g={};m&1&&(g.user=c[0]),r.$set(g),c[0].rank>1?a?(a.p(c,m),m&1&&I(a,1)):(a=x(c),a.c(),I(a,1),a.m(s,l)):a&&(G(),V(a,1,1,()=>{a=null}),J()),c[0].rank>1&&c[1][c[0].rank]?f||(f=ee(),f.c(),f.m(s,i)):f&&(f.d(1),f=null),c[1][c[0].rank]?o?(o.p(c,m),m&3&&I(o,1)):(o=te(c),o.c(),I(o,1),o.m(s,null)):o&&(G(),V(o,1,1,()=>{o=null}),J())},i(c){d||(I(r.$$.fragment,c),I(a),I(o),d=!0)},o(c){V(r.$$.fragment,c),V(a),V(o),d=!1},d(c){c&&p(e),W(r),a&&a.d(),f&&f.d(),o&&o.d()}}}function ke(n,e,r){let{user:t}=e,{rankings:s}=e;return n.$$set=l=>{"user"in l&&r(0,t=l.user),"rankings"in l&&r(1,s=l.rankings)},[t,s]}class be extends H{constructor(e){super(),M(this,e,ke,ve,A,{user:0,rankings:1})}}function se(n,e,r){const t=n.slice();return t[1]=e[r],t[6]=r,t}function ye(n){let e,r=Z(n[0]),t=[];for(let s=0;s<r.length;s+=1)t[s]=re(se(n,r,s));return{c(){e=y("table");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=S(s,"TABLE",{class:!0});var l=w(e);for(let i=0;i<t.length;i+=1)t[i].l(l);l.forEach(p),this.h()},h(){_(e,"class","svelte-glvni4")},m(s,l){R(s,e,l);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(s,l){if(l&1){r=Z(s[0]);let i;for(i=0;i<r.length;i+=1){const d=se(s,r,i);t[i]?t[i].p(d,l):(t[i]=re(d),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=r.length}},i:T,o:T,d(s){s&&p(e),ie(t,s)}}}function Se(n){let e,r;return e=new be({props:{user:n[1],rankings:n[0]}}),{c(){N(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,s){B(e,t,s),r=!0},p(t,s){const l={};s&2&&(l.user=t[1]),s&1&&(l.rankings=t[0]),e.$set(l)},i(t){r||(I(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){W(e,t)}}}function re(n){let e,r,t,s=n[6]+1+"",l,i,d,a,f=n[1].username+"",o,c,m,g,E=n[1].gained_score.toLocaleString()+"",$,U;return{c(){e=y("tr"),r=y("td"),t=q("#"),l=q(s),i=P(),d=y("td"),a=y("a"),o=q(f),m=P(),g=y("td"),$=q(E),U=P(),this.h()},l(v){e=S(v,"TR",{class:!0});var h=w(e);r=S(h,"TD",{class:!0});var b=w(r);t=L(b,"#"),l=L(b,s),b.forEach(p),i=j(h),d=S(h,"TD",{class:!0});var k=w(d);a=S(k,"A",{href:!0,class:!0});var D=w(a);o=L(D,f),D.forEach(p),k.forEach(p),m=j(h),g=S(h,"TD",{class:!0});var z=w(g);$=L(z,E),z.forEach(p),U=j(h),h.forEach(p),this.h()},h(){_(r,"class","rank svelte-glvni4"),_(a,"href",c="#"+n[1].username),_(a,"class","svelte-glvni4"),_(d,"class","user svelte-glvni4"),_(g,"class","score svelte-glvni4"),_(e,"class","svelte-glvni4")},m(v,h){R(v,e,h),u(e,r),u(r,t),u(r,l),u(e,i),u(e,d),u(d,a),u(a,o),u(e,m),u(e,g),u(g,$),u(e,U)},p(v,h){h&1&&f!==(f=v[1].username+"")&&C(o,f),h&1&&c!==(c="#"+v[1].username)&&_(a,"href",c),h&1&&E!==(E=v[1].gained_score.toLocaleString()+"")&&C($,E)},d(v){v&&p(e)}}}function we(n){let e,r,t,s;const l=[Se,ye],i=[];function d(a,f){return a[1]?0:1}return e=d(n),r=i[e]=l[e](n),{c(){r.c(),t=X()},l(a){r.l(a),t=X()},m(a,f){i[e].m(a,f),R(a,t,f),s=!0},p(a,[f]){let o=e;e=d(a),e===o?i[e].p(a,f):(G(),V(i[o],1,1,()=>{i[o]=null}),J(),r=i[e],r?r.p(a,f):(r=i[e]=l[e](a),r.c()),I(r,1),r.m(t.parentNode,t))},i(a){s||(I(r),s=!0)},o(a){V(r),s=!1},d(a){a&&p(t),i[e].d(a)}}}function Ee(n,e,r){let t,s,l,i;ae(n,de,a=>r(4,i=a));let{data:d}=e;return le(()=>{const a=setInterval(()=>{invalidate("data:rankings")},6e4);return()=>{clearInterval(a)}}),n.$$set=a=>{"data"in a&&r(2,d=a.data)},n.$$.update=()=>{n.$$.dirty&16&&r(3,t=decodeURIComponent(i.hash.substring(1).toLowerCase())),n.$$.dirty&12&&r(1,s=t?d.rankings.find(a=>a.username.toLowerCase()===t):null),n.$$.dirty&4&&r(0,l=d.rankings)},[l,s,d,t,i]}class Ie extends H{constructor(e){super(),M(this,e,Ee,we,A,{data:2})}}export{Ie as component,De as universal};
