import{n as U,x as ee,y as _e,s as O,c as K,o as pe}from"../chunks/scheduler.C0snAWPl.js";import{S as H,i as q,e as E,s as C,t as F,c as b,a as S,d as k,f as j,b as L,o as p,p as z,g as V,h as d,j as R,u as M,v as N,w as W,n as P,q as Q,l as $,m as X,x as G,k as te,y as he}from"../chunks/index.BQssWk23.js";import{d as Y,w as Z,i as ge}from"../chunks/entry.JtjH_RlY.js";const ue=typeof window<"u";let ve=ue?()=>window.performance.now():()=>Date.now(),fe=ue?t=>requestAnimationFrame(t):U;const B=new Set;function de(t){B.forEach(e=>{e.c(t)||(B.delete(e),e.f())}),B.size!==0&&fe(de)}function ke(t){let e;return B.size===0&&fe(de),{promise:new Promise(r=>{B.add(e={c:t,f:r})}),abort(){B.delete(e)}}}function re(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}async function we(){return(await(await fetch("https://respektive.pw/scorecamp/")).json()).map(s=>({username:s.username,user_id:s.user_id,score_at_start:s.starting_ranked_score,current_score:s.ranked_score,gained_score:s.gained_score})).sort((s,a)=>a.gained_score-s.gained_score).map((s,a)=>({...s,rank:a+1}))}async function Ee({depends:t}){return t("data:rankings"),{rankings:await we()}}const qe=Object.freeze(Object.defineProperty({__proto__:null,load:Ee},Symbol.toStringTag,{value:"Module"}));function be(t){if(typeof window>"u"){const{subscribe:a}=Z(t);return{subscribe:a}}const e=Z(window.location.href),r=history.pushState,n=history.replaceState,s=()=>e.set(window.location.href);return history.pushState=function(){r.apply(this,arguments),s()},history.replaceState=function(){n.apply(this,arguments),s()},window.addEventListener("popstate",s),window.addEventListener("hashchange",s),{subscribe:Y(e,a=>new URL(a)).subscribe}}const Se=be();function ne(t){return Object.prototype.toString.call(t)==="[object Date]"}function ye(t){return--t*t*t*t*t+1}function x(t,e){if(t===e||t!==t)return()=>t;const r=typeof t;if(r!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((s,a)=>x(t[a],s));return s=>n.map(a=>a(s))}if(r==="object"){if(!t||!e)throw new Error("Object cannot be null");if(ne(t)&&ne(e)){t=t.getTime(),e=e.getTime();const a=e-t;return i=>new Date(t+i*a)}const n=Object.keys(e),s={};return n.forEach(a=>{s[a]=x(t[a],e[a])}),a=>{const i={};return n.forEach(f=>{i[f]=s[f](a)}),i}}if(r==="number"){const n=e-t;return s=>t+s*n}throw new Error(`Cannot interpolate ${r} values`)}function De(t,e={}){const r=Z(t);let n,s=t;function a(i,f){if(t==null)return r.set(t=i),Promise.resolve();s=i;let l=n,o=!1,{delay:u=0,duration:c=400,easing:h=_e,interpolate:v=x}=ee(ee({},e),f);if(c===0)return l&&(l.abort(),l=null),r.set(t=s),Promise.resolve();const g=ve()+u;let y;return n=ke(D=>{if(D<g)return!0;o||(y=v(t,i),typeof c=="function"&&(c=c(t,i)),o=!0),l&&(l.abort(),l=null);const w=D-g;return w>c?(r.set(t=i),!1):(r.set(t=y(h(w/c))),!0)}),n.promise}return{set:a,update:(i,f)=>a(i(s,t),f),subscribe:r.subscribe}}const Ae={duration:2500,easing:ye};function se(t){return t===1?"linear-gradient(180deg, #FFE600 0%, #ED82FF 100%)":t<=10?"linear-gradient(180deg, #97DCFF 0%, #ED82FF 100%)":t<=25?"linear-gradient(180deg, #A8F0EF 0%, #52E0DF 100%)":t<=50?"linear-gradient(180deg, #FFEE99 0%, #FFDD33 100%)":t<=75?"linear-gradient(180deg, #E0E0EB 0%, #A3A3C2 100%)":t<=100?"linear-gradient(180deg, #B88F7A 0%, #855C47 100%)":"#BAB2AB"}function Fe(t){let e,r,n,s,a,i=t[0].username+"",f,l,o,u,c,h,v,g,y,D=t[0].rank+"",w;return{c(){e=E("div"),r=E("div"),n=C(),s=E("div"),a=E("p"),f=F(i),l=C(),o=E("hr"),u=C(),c=E("p"),h=F(t[2]),v=C(),g=E("p"),y=F("#"),w=F(D),this.h()},l(m){e=b(m,"DIV",{class:!0,style:!0});var _=S(e);r=b(_,"DIV",{id:!0,style:!0,class:!0}),S(r).forEach(k),n=j(_),s=b(_,"DIV",{class:!0});var A=S(s);a=b(A,"P",{id:!0,class:!0});var I=S(a);f=L(I,i),I.forEach(k),l=j(A),o=b(A,"HR",{class:!0}),u=j(A),c=b(A,"P",{id:!0,class:!0});var T=S(c);h=L(T,t[2]),T.forEach(k),A.forEach(k),v=j(_),g=b(_,"P",{id:!0,style:!0,class:!0});var J=S(g);y=L(J,"#"),w=L(J,D),J.forEach(k),_.forEach(k),this.h()},h(){p(r,"id","avatar"),z(r,"background-image","url(https://a.ppy.sh/"+t[0].user_id+")"),p(r,"class","svelte-1c1mcm4"),p(a,"id","username"),p(a,"class","svelte-1c1mcm4"),p(o,"class","svelte-1c1mcm4"),p(c,"id","gained"),p(c,"class","svelte-1c1mcm4"),p(s,"class","stats svelte-1c1mcm4"),p(g,"id","rank"),z(g,"--rank-colour",se(t[0].rank)),p(g,"class","svelte-1c1mcm4"),p(e,"class","card svelte-1c1mcm4"),z(e,"--card-hue",t[1])},m(m,_){V(m,e,_),d(e,r),d(e,n),d(e,s),d(s,a),d(a,f),d(s,l),d(s,o),d(s,u),d(s,c),d(c,h),d(e,v),d(e,g),d(g,y),d(g,w)},p(m,[_]){_&1&&z(r,"background-image","url(https://a.ppy.sh/"+m[0].user_id+")"),_&1&&i!==(i=m[0].username+"")&&R(f,i),_&4&&R(h,m[2]),_&1&&D!==(D=m[0].rank+"")&&R(w,D),_&1&&z(g,"--rank-colour",se(m[0].rank)),_&2&&z(e,"--card-hue",m[1])},i:U,o:U,d(m){m&&k(e)}}}function Le(t,e,r){let n,s;const a=De(0,Ae),i=Y(a,o=>Math.round(o).toLocaleString("en-US"));K(t,i,o=>r(2,s=o));const f=Y(a,o=>o/1e6%360);K(t,f,o=>r(1,n=o));let{user:l}=e;return t.$$set=o=>{"user"in o&&r(0,l=o.user)},t.$$.update=()=>{t.$$.dirty&1&&a.set(l.gained_score)},[l,n,s,i,f]}class Pe extends H{constructor(e){super(),q(this,e,Le,Fe,O,{user:0})}}function Ce(t){let e,r,n,s=t[0].rank+"",a,i,f=t[0].username+"",l,o,u,c=t[0].gained_score.toLocaleString("en-US")+"",h,v,g,y=t[1].toLocaleString("en-US")+"",D,w;return{c(){e=E("div"),r=E("p"),n=F("#"),a=F(s),i=F(" - "),l=F(f),o=C(),u=E("p"),h=F(c),v=C(),g=E("span"),D=F(y),this.h()},l(m){e=b(m,"DIV",{class:!0});var _=S(e);r=b(_,"P",{id:!0,class:!0});var A=S(r);n=L(A,"#"),a=L(A,s),i=L(A," - "),l=L(A,f),A.forEach(k),o=j(_),u=b(_,"P",{id:!0,class:!0});var I=S(u);h=L(I,c),v=j(I),g=b(I,"SPAN",{id:!0,class:!0});var T=S(g);D=L(T,y),T.forEach(k),I.forEach(k),_.forEach(k),this.h()},h(){p(r,"id","username"),p(r,"class","svelte-wa6hk6"),p(g,"id",w=t[1]>0?"positive":"negative"),p(g,"class","svelte-wa6hk6"),p(u,"id","score"),p(u,"class","svelte-wa6hk6"),p(e,"class","delta svelte-wa6hk6")},m(m,_){V(m,e,_),d(e,r),d(r,n),d(r,a),d(r,i),d(r,l),d(e,o),d(e,u),d(u,h),d(u,v),d(u,g),d(g,D)},p(m,[_]){_&1&&s!==(s=m[0].rank+"")&&R(a,s),_&1&&f!==(f=m[0].username+"")&&R(l,f),_&1&&c!==(c=m[0].gained_score.toLocaleString("en-US")+"")&&R(h,c),_&2&&y!==(y=m[1].toLocaleString("en-US")+"")&&R(D,y),_&2&&w!==(w=m[1]>0?"positive":"negative")&&p(g,"id",w)},i:U,o:U,d(m){m&&k(e)}}}function je(t,e,r){let{main_user:n}=e,{compare_user:s}=e,a=0;return t.$$set=i=>{"main_user"in i&&r(2,n=i.main_user),"compare_user"in i&&r(0,s=i.compare_user)},t.$$.update=()=>{t.$$.dirty&5&&r(1,a=s.gained_score-n.gained_score)},[s,a,n]}class me extends H{constructor(e){super(),q(this,e,je,Ce,O,{main_user:2,compare_user:0})}}function ae(t){let e,r;return e=new me({props:{main_user:t[0],compare_user:t[1][t[0].rank-2]}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){W(e,n,s),r=!0},p(n,s){const a={};s&1&&(a.main_user=n[0]),s&3&&(a.compare_user=n[1][n[0].rank-2]),e.$set(a)},i(n){r||(P(e.$$.fragment,n),r=!0)},o(n){$(e.$$.fragment,n),r=!1},d(n){G(e,n)}}}function ie(t){let e;return{c(){e=E("div"),this.h()},l(r){e=b(r,"DIV",{id:!0,class:!0}),S(e).forEach(k),this.h()},h(){p(e,"id","spacer"),p(e,"class","svelte-1irzswg")},m(r,n){V(r,e,n)},d(r){r&&k(e)}}}function le(t){let e,r;return e=new me({props:{main_user:t[0],compare_user:t[1][t[0].rank]}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){W(e,n,s),r=!0},p(n,s){const a={};s&1&&(a.main_user=n[0]),s&3&&(a.compare_user=n[1][n[0].rank]),e.$set(a)},i(n){r||(P(e.$$.fragment,n),r=!0)},o(n){$(e.$$.fragment,n),r=!1},d(n){G(e,n)}}}function Ie(t){let e,r,n,s,a,i,f,l=t[0].rank>1&&ae(t),o=t[0].rank>1&&t[1][t[0].rank]&&ie(),u=t[1][t[0].rank]&&le(t);return i=new Pe({props:{user:t[0]}}),{c(){e=E("div"),r=E("div"),l&&l.c(),n=C(),o&&o.c(),s=C(),u&&u.c(),a=C(),M(i.$$.fragment),this.h()},l(c){e=b(c,"DIV",{class:!0});var h=S(e);r=b(h,"DIV",{class:!0});var v=S(r);l&&l.l(v),n=j(v),o&&o.l(v),s=j(v),u&&u.l(v),v.forEach(k),a=j(h),N(i.$$.fragment,h),h.forEach(k),this.h()},h(){p(r,"class","deltas svelte-1irzswg"),p(e,"class","container svelte-1irzswg")},m(c,h){V(c,e,h),d(e,r),l&&l.m(r,null),d(r,n),o&&o.m(r,null),d(r,s),u&&u.m(r,null),d(e,a),W(i,e,null),f=!0},p(c,[h]){c[0].rank>1?l?(l.p(c,h),h&1&&P(l,1)):(l=ae(c),l.c(),P(l,1),l.m(r,n)):l&&(Q(),$(l,1,1,()=>{l=null}),X()),c[0].rank>1&&c[1][c[0].rank]?o||(o=ie(),o.c(),o.m(r,s)):o&&(o.d(1),o=null),c[1][c[0].rank]?u?(u.p(c,h),h&3&&P(u,1)):(u=le(c),u.c(),P(u,1),u.m(r,null)):u&&(Q(),$(u,1,1,()=>{u=null}),X());const v={};h&1&&(v.user=c[0]),i.$set(v)},i(c){f||(P(l),P(u),P(i.$$.fragment,c),f=!0)},o(c){$(l),$(u),$(i.$$.fragment,c),f=!1},d(c){c&&k(e),l&&l.d(),o&&o.d(),u&&u.d(),G(i)}}}function $e(t,e,r){let{user:n}=e,{rankings:s}=e;return t.$$set=a=>{"user"in a&&r(0,n=a.user),"rankings"in a&&r(1,s=a.rankings)},[n,s]}class Re extends H{constructor(e){super(),q(this,e,$e,Ie,O,{user:0,rankings:1})}}function oe(t,e,r){const n=t.slice();return n[1]=e[r],n[7]=r,n}function Te(t){let e,r=re(t[0]),n=[];for(let s=0;s<r.length;s+=1)n[s]=ce(oe(t,r,s));return{c(){e=E("table");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=b(s,"TABLE",{class:!0});var a=S(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(k),this.h()},h(){p(e,"class","svelte-glvni4")},m(s,a){V(s,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,a){if(a&1){r=re(s[0]);let i;for(i=0;i<r.length;i+=1){const f=oe(s,r,i);n[i]?n[i].p(f,a):(n[i]=ce(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=r.length}},i:U,o:U,d(s){s&&k(e),he(n,s)}}}function Ue(t){let e,r;return e=new Re({props:{user:t[1],rankings:t[0]}}),{c(){M(e.$$.fragment)},l(n){N(e.$$.fragment,n)},m(n,s){W(e,n,s),r=!0},p(n,s){const a={};s&2&&(a.user=n[1]),s&1&&(a.rankings=n[0]),e.$set(a)},i(n){r||(P(e.$$.fragment,n),r=!0)},o(n){$(e.$$.fragment,n),r=!1},d(n){G(e,n)}}}function ce(t){let e,r,n,s=t[7]+1+"",a,i,f,l,o=t[1].username+"",u,c,h,v,g=t[1].gained_score.toLocaleString()+"",y,D;return{c(){e=E("tr"),r=E("td"),n=F("#"),a=F(s),i=C(),f=E("td"),l=E("a"),u=F(o),h=C(),v=E("td"),y=F(g),D=C(),this.h()},l(w){e=b(w,"TR",{class:!0});var m=S(e);r=b(m,"TD",{class:!0});var _=S(r);n=L(_,"#"),a=L(_,s),_.forEach(k),i=j(m),f=b(m,"TD",{class:!0});var A=S(f);l=b(A,"A",{href:!0,class:!0});var I=S(l);u=L(I,o),I.forEach(k),A.forEach(k),h=j(m),v=b(m,"TD",{class:!0});var T=S(v);y=L(T,g),T.forEach(k),D=j(m),m.forEach(k),this.h()},h(){p(r,"class","rank svelte-glvni4"),p(l,"href",c="#"+t[1].username),p(l,"class","svelte-glvni4"),p(f,"class","user svelte-glvni4"),p(v,"class","score svelte-glvni4"),p(e,"class","svelte-glvni4")},m(w,m){V(w,e,m),d(e,r),d(r,n),d(r,a),d(e,i),d(e,f),d(f,l),d(l,u),d(e,h),d(e,v),d(v,y),d(e,D)},p(w,m){m&1&&o!==(o=w[1].username+"")&&R(u,o),m&1&&c!==(c="#"+w[1].username)&&p(l,"href",c),m&1&&g!==(g=w[1].gained_score.toLocaleString()+"")&&R(y,g)},d(w){w&&k(e)}}}function Ve(t){let e,r,n,s;const a=[Ue,Te],i=[];function f(l,o){return l[1]?0:1}return e=f(t),r=i[e]=a[e](t),{c(){r.c(),n=te()},l(l){r.l(l),n=te()},m(l,o){i[e].m(l,o),V(l,n,o),s=!0},p(l,[o]){let u=e;e=f(l),e===u?i[e].p(l,o):(Q(),$(i[u],1,1,()=>{i[u]=null}),X(),r=i[e],r?r.p(l,o):(r=i[e]=a[e](l),r.c()),P(r,1),r.m(n.parentNode,n))},i(l){s||(P(r),s=!0)},o(l){$(r),s=!1},d(l){l&&k(n),i[e].d(l)}}}function ze(t,e,r){let n,s,a,i;K(t,Se,o=>r(4,i=o));let{data:f}=e;const l=60*1e3;return pe(()=>{const o=setInterval(()=>{ge("data:rankings")},l);return()=>{clearInterval(o)}}),t.$$set=o=>{"data"in o&&r(2,f=o.data)},t.$$.update=()=>{t.$$.dirty&16&&r(3,n=decodeURIComponent(i.hash.substring(1).toLowerCase())),t.$$.dirty&12&&r(1,s=n?f.rankings.find(o=>o.username.toLowerCase()===n):null),t.$$.dirty&4&&r(0,a=f.rankings)},[a,s,f,n,i]}class Me extends H{constructor(e){super(),q(this,e,ze,Ve,O,{data:2})}}export{Me as component,qe as universal};
